---
import { CollectionEntry, getCollection } from "astro:content";
import FeatureSectionItem from "src/components/Guide/FeatureSectionItem.astro";
import CheckIcon from "src/components/icons/CheckIcon.astro";
import TagList from "src/components/TagList.astro";
import MainLayout from "src/layouts/MainLayout.astro";

export async function getStaticPaths() {
  const guideEntries = await getCollection("guides");

  return guideEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

interface Props {
  entry: CollectionEntry<"guides">;
}

const { entry } = Astro.props;
const { Content } = await entry.render();

const { title, description, subtitle, image, tags } = entry.data;
---

<MainLayout>
  <article>
    <header
      class="mx-auto grid w-full max-w-6xl grid-cols-1 items-center gap-y-6 border-b border-neutral-800 py-8 md:grid-cols-12 md:border-transparent"
    >
      <div class="flex max-h-[32rem] md:col-span-6 lg:col-span-7">
        <img
          src={image.src}
          alt={image.alt}
          class="object-cover object-center"
        />
      </div>
      <div class="mx-auto max-w-xl px-8 md:col-span-6 lg:col-span-5">
        <TagList tags={tags} />

        <h1 class="mt-6 text-4xl">
          <span class="inline font-bold">{title}</span>
          {
            subtitle && (
              <span class="inline font-serif italic text-neutral-700">
                {subtitle}
              </span>
            )
          }
        </h1>

        <p class="mt-5 mb-8 text-xl text-neutral-700">
          {description}
        </p>
      </div>
    </header>

    <div class="prose prose-lg prose-neutral mx-auto mt-12 px-6 sm:px-8">
      <Content />
    </div>
  </article>
</MainLayout>
