---
import { CollectionEntry, getCollection } from "astro:content";
import FeatureSectionItem from "src/components/Guide/FeatureSectionItem.astro";
import TagList from "src/components/TagList.astro";
import MainLayout from "src/layouts/MainLayout.astro";

export async function getStaticPaths() {
  const guideEntries = await getCollection("guides");

  return guideEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

interface Props {
  entry: CollectionEntry<"guides">;
}

const { entry } = Astro.props;
const { Content } = await entry.render();

const { title, description, subtitle, image, tags } = entry.data;
---

<MainLayout>
  <header class="mx-auto grid w-full max-w-6xl grid-cols-1 md:grid-cols-12">
    <div
      class="h-[32rem] overflow-hidden bg-sky-100 md:col-span-6 lg:col-span-7"
    >
      <img
        src={image.src}
        alt={image.alt}
        class="w-full object-cover object-bottom"
      />
    </div>
    <div
      class="mx-auto max-w-xl py-10 px-8 md:col-span-6 md:py-32 lg:col-span-5"
    >
      <TagList tags={tags} />

      <h1 class="mt-6 text-4xl">
        <span class="inline font-bold">{title}</span>
        {subtitle && <span class="inline font-serif italic">{subtitle}</span>}
      </h1>

      <p class="mt-5 mb-8 text-xl">
        {description}
      </p>
    </div>
  </header>

  <section class="grid grid-cols-1 gap-x-6 py-24 px-6 sm:px-8 md:grid-cols-2">
    <div>
      <h2 class="text-5xl font-bold tracking-tighter md:text-8xl">
        Why Aeropress?
      </h2>
      <p class="mt-5 text-xl font-medium">
        Typewriter cronut meggings vibecession, small batch ugh narwhal vinyl
        migas knausgaard bushwick big mood.
      </p>
      <ul class="mt-5 grid grid-cols-2 gap-1.5">
        <FeatureSectionItem label="Slimey juice" />
        <FeatureSectionItem label="Happy birds" />
        <FeatureSectionItem label="Quaint hostels" />
        <FeatureSectionItem label="Fainting pants" />
        <FeatureSectionItem label="Wannabe disk jockeys" />
      </ul>
    </div>
    <div class="aspect-w-5 aspect-h-4 w-full overflow-hidden">
      <img
        src="/assets/ben-moreland-1Yje-NZrrME-unsplash.jpg"
        alt="a person making coffee with an aeropress brewer"
        class="object-cover"
      />
    </div>
  </section>

  <section class="bg-blue-50 py-12">
    <h2>You'll Need</h2>
  </section>

  <div class="prose mx-auto">
    <Content />
  </div>
</MainLayout>
